# üéØ SiteSpeak Environment Variables
# Copy this file to .env and fill in your actual values

# SiteSpeak Configuration
SITESPEAK_MAIN_SITE_ID=00000000-0000-0000-0000-000000000000
SITESPEAK_DEVELOPMENT_MODE=true

# ================================
# üî• ZORUNLU DEƒûI≈ûKENLER (REQUIRED)
# ================================

# OpenAI API Key (ZORUNLU - Voice AI i√ßin)
OPENAI_API_KEY=sk-your_openai_api_key_here

# JWT Secret (ZORUNLU - minimum 32 karakter)
# Use a secure random secret for signing JWTs. Do NOT commit real secrets.
# Example generator (64 hex chars / 32 bytes):
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=__GENERATE_A_SECURE_64_HEX_CHAR_SECRET__

# Encryption Key (ZORUNLU - tam 32 karakter)
# Used for server-side symmetric encryption. Generate exactly 32 hex characters
# (16 bytes -> 32 hex chars). Example generator:
#   node -e "console.log(require('crypto').randomBytes(16).toString('hex'))"
ENCRYPTION_KEY=__GENERATE_A_32_HEX_CHAR_KEY__

# ================================
# üåê APPLICATION CONFIGURATION
# ================================

NODE_ENV=development
PORT=5000

# Frontend & Backend URLs
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://localhost:5000
CLIENT_URL=http://localhost:3000
# Optional feature toggles
AUTO_CRAWLER_ENABLED=false
ADVANCED_EXTRACTION=false
AUTO_INDEX_CRON=
USE_LANGGRAPH_AGENT=false
SITESPEAK_KB_QUIET=false

# Widget & Demo URLs  
WIDGET_URL=http://localhost:8080

# ================================
# üóÑÔ∏è DATABASE CONFIGURATION
# ================================

# PostgreSQL Database (Neon/Supabase destekli veya local Docker)
# √ñrnek Neon/Supabase URL:
# DATABASE_URL=postgresql://user:pass@db.neon.tech/sitespeak
DATABASE_URL=postgresql://postgres:postgres@localhost:5433/sitespeak_dev_db

# Redis Cache (Upstash veya local Docker)
# Upstash √∂rnek: rediss://:<password>@<host>:<port>
REDIS_URL=redis://localhost:6380
# Alternative Redis config (crawler/jobs). REDIS_URL yoksa kullanƒ±lƒ±r
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Docker Database Settings
POSTGRES_DB=sitespeak_dev_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# ================================
# ü§ñ AI & VOICE CONFIGURATION
# ================================

# AI Models
AI_MODEL=gpt-4o
# Not: backend varsayƒ±lanƒ± text-embedding-3-small
EMBEDDING_MODEL=text-embedding-3-small
MAX_TOKENS=4000
INTENT_ENGINE_ENABLED=true
ENABLE_VECTOR_PERSIST=false
# When true, auto-crawler will use the Playwright-based crawler to render JS-heavy pages.
# Requires installing Playwright and its browsers: `cd server && npm install && npx playwright install --with-deps`
USE_PLAYWRIGHT_CRAWLER=false

# Optional: bearer token used by the auto-crawler when requesting protected backend API endpoints
# Set this to a valid JWT (e.g. from POST /api/auth/login) so the crawler can access /api/sites, etc.
# Example: CRAWLER_AUTH_TOKEN=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
CRAWLER_AUTH_TOKEN=

# HuggingFace API Key (optional, for alternative AI models)
HUGGINGFACE_API_KEY=hf_your_huggingface_api_key_here

# ElevenLabs API Key (optional, for premium voice synthesis)
ELEVENLABS_API_KEY=your_elevenlabs_api_key_here

# Deepgram API Key (optional, for premium speech-to-text)
DEEPGRAM_API_KEY=your_deepgram_api_key_here

# LangSmith Configuration (optional, for AI observability and monitoring)
LANGSMITH_API_KEY=your_langsmith_api_key_here
LANGSMITH_PROJECT=sitespeak
LANGSMITH_ENABLED=false
TRACE_SAMPLE_RATE=1.0

# Alternative AI Providers (optional, for failover and cost optimization)
ANTHROPIC_API_KEY=your_anthropic_api_key_here
COHERE_API_KEY=your_cohere_api_key_here
REPLICATE_API_TOKEN=your_replicate_api_token_here
TOGETHER_API_KEY=your_together_api_key_here
GROQ_API_KEY=your_groq_api_key_here

# Production Monitoring & Observability
DATADOG_API_KEY=your_datadog_api_key_here
DATADOG_APP_KEY=your_datadog_app_key_here
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key_here
NEW_RELIC_APP_NAME=sitespeak-production

# Distributed Tracing
OTEL_ENABLED=false
OTEL_SERVICE_NAME=sitespeak
OTEL_EXPORTER_OTLP_ENDPOINT=https://api.honeycomb.io
HONEYCOMB_API_KEY=your_honeycomb_api_key_here
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# Error Tracking (beyond Sentry)
BUGSNAG_API_KEY=your_bugsnag_api_key_here
ROLLBAR_ACCESS_TOKEN=your_rollbar_access_token_here

# Log Management
LOGTAIL_SOURCE_TOKEN=your_logtail_source_token_here
PAPERTRAIL_HOST=logs.papertrailapp.com
PAPERTRAIL_PORT=12345

# Performance Monitoring
GRAFANA_API_KEY=your_grafana_api_key_here
GRAFANA_ORG_ID=your_grafana_org_id_here
PROMETHEUS_PUSHGATEWAY_URL=http://localhost:9091

# Database Performance
PGVECTOR_ENABLED=true
VECTOR_INDEX_TYPE=hnsw
VECTOR_INDEX_PRESET=balanced
VECTOR_CACHE_SIZE=512MB
CONNECTION_POOL_SIZE=20

# ==== FILE STORAGE ====
# AWS S3 Configuration (optional, for file storage)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
AWS_BUCKET_NAME=sitespeak-uploads

# ==== CDN & PERFORMANCE ====
# Cloudflare (DNS, Pages, R2, Universal SSL)
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token
CLOUDFLARE_ACCOUNT_ID=your_cloudflare_account_id
CLOUDFLARE_ZONE_ID=your_cloudflare_zone_id
# Cloudflare Pages Deploy
CLOUDFLARE_PAGES_PROJECT=sitespeak-sites
CLOUDFLARE_PAGES_BRANCH=main
# Cloudflare R2 (S3-compatible)
R2_ACCOUNT_ID=your_r2_account_id
R2_ACCESS_KEY_ID=your_r2_access_key
R2_SECRET_ACCESS_KEY=your_r2_secret
R2_BUCKET=sitespeak-assets
R2_PUBLIC_URL=https://pub-xxxxxxxxxxxxxxxx.r2.dev
# Cache controls (optional)
CDN_ENABLED=false
CACHE_TTL=86400
STATIC_CACHE_TTL=604800

# ==== PUBLISHING INFRASTRUCTURE ====
# Artifact Store Provider (aws-s3, cloudflare-r2, minio)
ARTIFACT_STORE_PROVIDER=cloudflare-r2
ARTIFACT_BUCKET=sitespeak-artifacts
ARTIFACT_ACCESS_KEY_ID=your_artifact_access_key
ARTIFACT_SECRET_KEY=your_artifact_secret_key
ARTIFACT_REGION=auto
ARTIFACT_PUBLIC_URL=https://pub-artifacts-xxxx.r2.dev

# CDN Provider for purging (cloudflare, fastly, generic)
CDN_PROVIDER=cloudflare
CDN_PURGE_TIMEOUT=30000

# Fastly CDN (alternative to Cloudflare)
FASTLY_API_KEY=your_fastly_api_key
FASTLY_SERVICE_ID=your_fastly_service_id

# Generic CDN (for custom providers)
CDN_PURGE_ENDPOINT=https://your-cdn.com/api/purge
CDN_PURGE_HEADERS={"Authorization":"Bearer your-token"}

# MinIO (self-hosted S3-compatible storage)
MINIO_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY=your_minio_access_key
MINIO_SECRET_KEY=your_minio_secret_key
MINIO_BUCKET=sitespeak-artifacts
MINIO_REGION=us-east-1
MINIO_PUBLIC_URL=http://localhost:9000

# ==== DOMAIN & SSL ====
# Main domain for the platform
MAIN_DOMAIN=sitespeak.com
# Domain for published sites
SITES_DOMAIN=sites.sitespeak.com
# Public server IP (for DNS/Cloudflare automation)
SERVER_IP=127.0.0.1
# ACME/Let‚Äôs Encrypt
SSL_EMAIL=admin@sitespeak.com
SSL_STAGING=false

# ==== EMAIL CONFIGURATION ====
# SMTP Configuration for sending emails
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password

# SendGrid API Key (alternative to SMTP)
SENDGRID_API_KEY=your_sendgrid_api_key

# ==== ANALYTICS & MONITORING ====
# Plausible
PLAUSIBLE_DOMAIN=app.sitespeak.com
PLAUSIBLE_API_HOST=https://plausible.io
PLAUSIBLE_ENABLED=false

# PostHog
POSTHOG_API_KEY=
POSTHOG_HOST=https://app.posthog.com
POSTHOG_ENABLED=false

# Sentry for error tracking
SENTRY_DSN=your_sentry_dsn_here
SENTRY_ENV=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# ==== BILLING (Stripe) ====
# Stripe secret keys and pricing IDs (fill via GitHub Secrets in CI)
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_PRICE_FREE=
STRIPE_PRICE_BASIC=
STRIPE_PRICE_PRO=
STRIPE_BILLING_PORTAL_URL=
STRIPE_SUCCESS_URL=
STRIPE_CANCEL_URL=
PLAN_FREE_AI_TOKENS=200000
PLAN_BASIC_AI_TOKENS=2000000
PLAN_PRO_AI_TOKENS=10000000
PLAN_FREE_KB_MB=50
PLAN_BASIC_KB_MB=500
PLAN_PRO_KB_MB=5000

# ==== DEVELOPMENT TOOLS ====
# Enable debug logging
DEBUG=sitespeak:*
# Relax strict-mode checks (dev only)
NO_STRICT_CHECKS=false

# Hot reload for development
CHOKIDAR_USEPOLLING=true

# ==== SECURITY ====
# Rate limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=900000

# CORS origins (comma separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# ==== VOICE AI CONFIGURATION ====
# Default voice settings
DEFAULT_VOICE_LANGUAGE=tr-TR
DEFAULT_TTS_VOICE=alloy
VOICE_RESPONSE_TIMEOUT=30000

# Knowledge base settings
KB_MIN_SIMILARITY=0.7
KNOWLEDGE_BASE_MAX_CHUNKS=1000
KNOWLEDGE_BASE_CHUNK_SIZE=1000
KNOWLEDGE_BASE_OVERLAP_SIZE=100
KB_VECTOR_INDEX=hnsw   # or ivfflat
KB_HNSW_M=16
KB_HNSW_EF_CONSTRUCTION=128
# KB_HNSW_EF_SEARCH=64
KB_IVFFLAT_LISTS=100
KB_IVFFLAT_PROBES=10
# KB_ANALYZE_ON_COMMIT=true

# ==== PUBLISHING PATHS ====
# Static publish & upload directories (server-side)
PUBLISH_PATH=./published-sites
PUBLISHED_SITES_PATH=./published-sites
UPLOADS_PATH=./uploads

# ==== SERVICE URL OVERRIDES ====
# Optional: split services; gateway/proxy reads these
AUTH_SERVICE_URL=http://localhost:5001
SITES_SERVICE_URL=http://localhost:5002
AI_SERVICE_URL=http://localhost:5003
ANALYTICS_SERVICE_URL=http://localhost:5004
GATEWAY_PORT=5000
AUTH_SERVICE_PORT=5001
SITES_SERVICE_PORT=5002

# ==== RUNTIME URLS ====
# Websocket URL for voice (if proxied elsewhere)
WEBSOCKET_URL=ws://localhost:3001/voice
# Server base URL for asset links
BASE_URL=http://localhost:5000
# Sites base URL used in publishing contracts
SITES_BASE_URL=sitespeak.com

# ==== CRAWLER ====
MAX_CONCURRENT_CRAWLERS=3
CRAWLER_USER_AGENT=SiteSpeak-Crawler/1.0 (+https://sitespeak.ai/bot)
LOG_LEVEL=info

# ==== TESTING (optional) ====
TEST_DATABASE_URL=postgresql://test:test@localhost:5433/sitespeak_test
TEST_REDIS_URL=redis://localhost:6379/1

# ==== DOCKER SPECIFIC ====
# These are used in docker-compose files
POSTGRES_DB=sitespeak_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=sitespeak2024

# Frontend -> Backend public URL (for Pages / client builds)
NEXT_PUBLIC_API_URL=https://api.your-domain.com